<a href="{{ block.settings.custom_button_url }}" class="button button--full-width buttton--primary pdp-custom-button product-form__submit{% if block.settings.custom_button_background != blank %} image-button{% endif %}" target="_blank" {% unless block.settings.custom_button_background != blank %}style="color: {{ block.settings.custom_button_text_color }}; background-color: {{ block.settings.custom_button_background_color }};"{% endunless %}>
  {%- if block.settings.custom_button_background != blank -%}
    {%- capture sizes -%}(min-width: {{ settings.page_width }}px) {% if section.blocks.size == 1 %}calc({{ settings.page_width }}px - 100px){% else %}{{ settings.page_width | minus: 100 | times: 0.67 | round }}px{% endif %}, (min-width: 750px){% if section.blocks.size == 1 %} calc(100vw - 100px){% else %} 500px{% endif %}, calc(100vw - 30px){%- endcapture -%}
    {{
        block.settings.custom_button_background
        | image_url: width: 3000
        | image_tag: loading: 'lazy', sizes: sizes, widths: '550, 720, 990, 1100, 1500, 2200, 3000'
    }}
  {%- else -%}
    <span>{{ block.settings.custom_button_text }}</span>
  {%- endif -%}
</a> 